import{Q as _,c as C,r as o,j as e,N as A,L as i,F as v,a as y,b as I,d as O,H as P,_ as f,R as T,e as p,f as k,g as L,h as R,E as S,i as z}from"./vendor-bc9577cd.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const F=new _({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:(t,n)=>(n==null?void 0:n.status)===404?!1:t<2,retryDelay:t=>Math.min(1e3*2**t,3e4),staleTime:5e3,cacheTime:1e3*60*60,onError:t=>{console.error("React Query Error:",t)}},mutations:{onError:t=>{console.error("React Query Mutation Error:",t)}}}}),M="https://qpxjmkwebtehwbxbsefs.supabase.co",D="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweGpta3dlYnRlaHdieGJzZWZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY2MTYxNjgsImV4cCI6MjA1MjE5MjE2OH0.p4ucPBRNkK6oKPblq28DKpk8SyuugESfhFohJoPGyBQ",b=C(M,D,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),w=o.createContext({session:null,loading:!0});function U({children:t}){const[n,a]=o.useState(null),[c,s]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const{data:{session:x}}=await b.auth.getSession();a(x)}catch(x){console.error("Error al obtener la sesión:",x)}finally{s(!1)}})();const{data:{subscription:m}}=b.auth.onAuthStateChange((x,g)=>{a(g),s(!1)});return()=>{m.unsubscribe()}},[]),e.jsx(w.Provider,{value:{session:n,loading:c},children:t})}function V(){const t=o.useContext(w);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function q({children:t}){const{session:n,loading:a}=V();return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):n?e.jsx(e.Fragment,{children:t}):e.jsx(A,{to:"/login",replace:!0})}const N=o.createContext(void 0);function G({children:t}){const[n,a]=o.useState([]),[c,s]=o.useState(!1),r=d=>{a(l=>{const u=l.find(h=>h.product.id===d.id);return u?u.quantity>=d.stock?l:l.map(h=>h.product.id===d.id?{...h,quantity:Math.min(h.quantity+1,d.stock)}:h):[...l,{product:d,quantity:1}]}),s(!0)},m=d=>{a(l=>l.filter(u=>u.product.id!==d))},x=(d,l)=>{l<1||a(u=>{const h=u.find(j=>j.product.id===d);return!h||l>h.product.stock?u:u.map(j=>j.product.id===d?{...j,quantity:l}:j)})},g=()=>{a([]),s(!1)},E=n.reduce((d,l)=>d+l.product.price*l.quantity,0);return e.jsx(N.Provider,{value:{items:n,addItem:r,removeItem:m,updateQuantity:x,clearCart:g,total:E,isOpen:c,setIsOpen:s},children:t})}function re(){const t=o.useContext(N);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t}const J=()=>{const[t,n]=o.useState(!1),a=()=>{n(!t)},s="https://wa.me/+50578364365";return e.jsxs("header",{className:"bg-black text-white sticky top-0 z-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(i,{to:"/",className:"flex items-center",onClick:()=>{window.dispatchEvent(new CustomEvent("reset-store-filters"))},children:[e.jsx("img",{src:"./logo.png",alt:"Logo",className:"w-12 h-12 rounded-full"}),e.jsx("span",{className:"ml-3 text-2xl md:text-3xl font-black tracking-wide text-white",style:{fontFamily:"Poppins",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},children:"GATOTAKU"})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsxs(i,{to:"/",className:"relative group",children:[e.jsx("span",{className:"hover:text-gray-300",children:"Catálogo"}),e.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-orange-500 transform scale-x-0 transition-transform group-hover:scale-x-100"})]}),e.jsxs(i,{to:"/about",className:"relative group",children:[e.jsx("span",{className:"hover:text-gray-300",children:"Sobre Nosotros"}),e.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-orange-500 transform scale-x-0 transition-transform group-hover:scale-x-100"})]}),e.jsxs(i,{to:"/information",className:"relative group",children:[e.jsx("span",{className:"hover:text-gray-300",children:"Información"}),e.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-orange-500 transform scale-x-0 transition-transform group-hover:scale-x-100"})]}),e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"relative group flex items-center",children:[e.jsxs("span",{className:"hover:text-gray-300 flex items-center",children:[e.jsx(v,{className:"mr-2"}),"WhatsApp"]}),e.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-orange-500 transform scale-x-0 transition-transform group-hover:scale-x-100"})]}),e.jsx(i,{to:"/cart",className:"hover:text-orange-500 transition-colors",children:e.jsx(y,{className:"text-2xl"})})]}),e.jsx("button",{onClick:a,className:"md:hidden text-white focus:outline-none",children:t?e.jsx(I,{size:24}):e.jsx(O,{size:24})})]}),t&&e.jsx("div",{className:"md:hidden py-4",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(i,{to:"/",className:"text-white hover:text-orange-500 transition-colors",onClick:()=>n(!1),children:"Catálogo"}),e.jsx(i,{to:"/about",className:"text-white hover:text-orange-500 transition-colors",onClick:()=>n(!1),children:"Sobre Nosotros"}),e.jsx(i,{to:"/information",className:"text-white hover:text-orange-500 transition-colors",onClick:()=>n(!1),children:"Información"}),e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-orange-500 transition-colors flex items-center",onClick:()=>n(!1),children:[e.jsx(v,{className:"mr-2"}),"WhatsApp"]})]})})]}),e.jsx("div",{className:"fixed bottom-4 right-4 md:hidden z-50 bg-orange-500 rounded-full p-3 shadow-lg hover:bg-orange-600 transition-colors",children:e.jsx(i,{to:"/cart",children:e.jsx(y,{className:"text-white text-2xl"})})})]})},K=()=>{const t="+50578364365",n=`https://wa.me/${t}`;return e.jsx("footer",{className:"bg-black text-white mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:"./logo.png",alt:"Logo",className:"w-10 h-10 rounded-full"}),e.jsx("span",{className:"text-3xl font-black tracking-wider",style:{fontFamily:"'Poppins', sans-serif"},children:"GATOTAKU"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Enlaces Rápidos"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(i,{to:"/",className:"hover:text-gray-300",children:"Inicio"})}),e.jsx("li",{children:e.jsx(i,{to:"/about",className:"hover:text-gray-300",children:"Sobre Nosotros"})}),e.jsx("li",{children:e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:text-gray-300",children:[e.jsx(v,{className:"mr-2"}),"Contáctenos"]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Información"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(i,{to:"/information/payment-methods",className:"hover:text-gray-300",children:"Métodos de pago"})}),e.jsx("li",{children:e.jsx(i,{to:"/information/shipping",className:"hover:text-gray-300",children:"Envíos"})}),e.jsx("li",{children:e.jsx(i,{to:"/information/refunds",className:"hover:text-gray-300",children:"Reembolsos"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Contacto"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:["WhatsApp: ",t]}),e.jsx("li",{children:"Email: contacto@gatotaku.com"})]})]})]}),e.jsxs("div",{className:"mt-8 text-sm text-gray-400",children:[new Date().getFullYear()," Gatotaku. Todos los derechos reservados."]})]})})})};function Q({title:t,description:n,image:a,url:c}){const s="GATOTAKU - Tu Tienda de Anime",r=t===s?t:`${t} | ${s}`,m="logo.png",x="https://gatotaku.com";return e.jsxs(P,{children:[e.jsx("title",{children:r}),e.jsx("meta",{name:"description",content:n}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:title",content:r}),e.jsx("meta",{property:"og:description",content:n}),e.jsx("meta",{property:"og:image",content:a||m}),e.jsx("meta",{property:"og:url",content:c||x}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:r}),e.jsx("meta",{name:"twitter:description",content:n}),e.jsx("meta",{name:"twitter:image",content:a||m}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e.jsx("meta",{name:"theme-color",content:"#f97316"})," ",e.jsx("link",{rel:"canonical",href:c||x})]})}const B=o.lazy(()=>f(()=>import("./AdminPanel-b98aab56.js"),["assets/AdminPanel-b98aab56.js","assets/vendor-bc9577cd.js"])),H=o.lazy(()=>f(()=>import("./LoginPage-eaf3d5c4.js"),["assets/LoginPage-eaf3d5c4.js","assets/vendor-bc9577cd.js"])),W=o.lazy(()=>f(()=>import("./About-78f7c713.js"),["assets/About-78f7c713.js","assets/vendor-bc9577cd.js"])),Y=o.lazy(()=>f(()=>import("./Information-2f2b5ddb.js"),["assets/Information-2f2b5ddb.js","assets/vendor-bc9577cd.js","assets/About-78f7c713.js","assets/PaymentMethods-b8580d2f.js","assets/Refunds-0cf373fd.js","assets/Layaway-158bd33e.js"])),Z=o.lazy(()=>f(()=>import("./Refunds-0cf373fd.js"),["assets/Refunds-0cf373fd.js","assets/vendor-bc9577cd.js"])),$=o.lazy(()=>f(()=>import("./PaymentMethods-b8580d2f.js"),["assets/PaymentMethods-b8580d2f.js","assets/vendor-bc9577cd.js"])),X=o.lazy(()=>f(()=>import("./Layaway-158bd33e.js"),["assets/Layaway-158bd33e.js","assets/vendor-bc9577cd.js"])),ee=o.lazy(()=>f(()=>import("./StoreFront-effd6f81.js"),["assets/StoreFront-effd6f81.js","assets/vendor-bc9577cd.js","assets/ImageCarousel-93fc8ab2.js"])),te=o.lazy(()=>f(()=>import("./ProductDetail-6a9ada0f.js"),["assets/ProductDetail-6a9ada0f.js","assets/vendor-bc9577cd.js","assets/ImageCarousel-93fc8ab2.js"])),se=o.memo(({error:t,resetErrorBoundary:n})=>(o.useEffect(()=>{console.error("Caught an error:",t)},[t]),e.jsxs("div",{role:"alert",children:[e.jsx("p",{children:"Something went wrong:"}),e.jsx("pre",{children:t.message}),e.jsx("button",{onClick:n,children:"Try again"})]})));function ne(){const[t,n]=o.useState(navigator.onLine);o.useEffect(()=>{console.log("🔄 App Component Mounted/Updated");const s=r=>{console.log("🚨 Page Reload Triggered",r)};return window.addEventListener("beforeunload",s),()=>{console.log("🔚 App Component Unmounted"),window.removeEventListener("beforeunload",s)}},[]),o.useEffect(()=>{const s=()=>n(!0),r=()=>n(!1);return window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}},[]);const a=o.useCallback(()=>{window.location.reload()},[]),c=o.useMemo(()=>e.jsxs(T,{children:[e.jsx(p,{path:"/",element:e.jsx(ee,{})}),e.jsx(p,{path:"/producto/:id",element:e.jsx(te,{})}),e.jsx(p,{path:"/admin",element:e.jsx(q,{children:e.jsx(B,{})})}),e.jsx(p,{path:"/login",element:e.jsx(H,{})}),e.jsx(p,{path:"/about",element:e.jsx(W,{})}),e.jsx(p,{path:"/information/*",element:e.jsx(Y,{})}),e.jsx(p,{path:"/reembolsos",element:e.jsx(Z,{})}),e.jsx(p,{path:"/metodos-pago",element:e.jsx($,{})}),e.jsx(p,{path:"/apartados",element:e.jsx(X,{})})]}),[]);return t?e.jsx(k,{client:F,children:e.jsx(L,{children:e.jsx(U,{children:e.jsx(G,{children:e.jsx(R,{children:e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(Q,{title:"GATOTAKU - Tu Tienda de Anime",description:"Tienda online de productos de anime y manga. Encuentra los mejores artículos de tus series favoritas."}),e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(J,{}),e.jsx("main",{className:"flex-grow",children:e.jsx(S,{FallbackComponent:se,onReset:a,children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Cargando..."}),children:c})})}),e.jsx(K,{})]})]})})})})})}):e.jsx("div",{children:"No internet connection. Please check your network."})}z(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(ne,{})}));export{Q as S,re as a,b as s,V as u};
